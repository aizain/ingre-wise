# IngreWise 会食 - 智能食品成分分析小程序

IngreWise（会食）是一款基于微信小程序平台的智能食品成分分析工具，旨在帮助用户更好地了解食品成分，做出更健康的饮食选择。通过先进的 AI 技术，为用户提供专业、准确的食品成分分析服务。

## 功能特点

- 📸 **智能识别**：支持拍照和相册上传，自动识别食品包装上的成分表
- 🔍 **成分分析**：深度分析食品成分，提供详细的营养信息
- 📊 **健康评估**：对食品进行健康评分，提供健康建议
- 📱 **扫码查询**：支持商品条形码扫描，快速获取商品信息
- 📖 **历史记录**：记录查询历史，方便回顾和比较
- 👤 **个人中心**：用户数据管理和设置
- 🤖 **AI 助手**：内置智能助手，解答食品成分相关问题

## 技术架构

### 前端架构
- 基于微信小程序原生框架
- 使用云开发能力
- 支持实时图像处理和分析
- 自定义相机组件
- 响应式UI设计

### 后端服务
- 云函数处理业务逻辑
- 云存储保存图片资源
- 云数据库存储用户数据
- AI 模型集成
  - 豆包大模型：图像识别和分析
  - Coze API：智能问答服务
- 实时数据分析

### AI 能力
- **图像识别**
  - 配料表文字识别
  - 营养成分表识别
  - 商品信息提取
- **智能分析**
  - 成分分类标注
  - 风险等级评估
  - 健康建议生成
- **数据处理**
  - JSON 格式标准化
  - 数据验证和清洗
  - 异常处理机制

## 主要模块

### 1. 首页模块 (home)
- 主要功能入口
- 拍照/相册上传
- 扫码识别
- 图片验证（大小、格式、尺寸）
- 智能压缩处理

### 2. 相机模块 (camera)
- 自定义相机界面
- 实时预览
- 图像采集
- 条形码扫描
- 拍摄指导
- 防抖优化

### 3. 分析模块 (analysis)
- 图像识别处理
- 成分数据分析
- 健康评估报告
- 添加剂分类展示
  - 防腐剂
  - 着色剂
  - 甜味剂
  - 香精
  - 增稠剂
- 风险等级评估
  - 低风险：安全，可放心使用
  - 中风险：适量使用，注意用量
  - 高风险：建议慎重使用，留意个人反应
- AI 智能问答
  - 实时解答食品成分相关问题
  - 个性化建议

### 4. 历史记录 (history)
- 查询历史列表
- 历史记录详情
- 数据统计
- 分享功能

### 5. 用户中心 (user-center)
- 用户信息管理
- 使用设置
- 隐私管理
- 权限管理

## 开发环境

- 微信开发者工具
- Node.js 环境
- 云开发环境
  - 云函数
  - 云存储
  - 云数据库

## 项目结构

```
miniprogram/
├── pages/
│   └── ingre-wise/
│       ├── home/         # 首页
│       ├── camera/       # 相机页
│       ├── analysis/     # 分析页
│       ├── detail/       # 详情页
│       ├── history/      # 历史记录
│       └── user-center/  # 用户中心
├── components/          # 公共组件
├── images/             # 图片资源
└── utils/             # 工具函数

cloudfunctions/
└── ingre-wise/        # 云函数
    ├── analyzeUserProduct/  # 产品分析
    │   ├── index.js        # 主函数入口
    │   └── config/        # 配置文件
    ├── getImageUrl/        # 图片处理
    └── getProductByBarcode/ # 条码查询
```

## 图片处理规范

- 支持格式：jpg、jpeg、png
- 大小限制：1MB
- 最小尺寸：200x200像素
- 压缩处理：
  - 质量：80%
  - 最大宽度：1280像素
  - 等比压缩

## AI 分析规范

### 输入要求
- 清晰的配料表图片
- 完整的营养成分表
- 商品条形码（可选）

### 输出格式
- 标准化 JSON 结构
- 必要字段验证
- 异常处理机制

### 分析内容
1. 基础信息
   - 产品名称
   - 配料清单
   - 营养成分
   
2. 深度分析
   - 成分分类
   - 风险评估
   - 健康建议
   
3. 健康评分
   - 0-100 分制
   - 多维度评估
   - 个性化建议

## 安装和使用

1. 下载并安装[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

2. 导入项目
- 打开微信开发者工具
- 点击"导入项目"
- 选择项目目录
- 填写自己的小程序 AppID

3. 云开发配置
- 开通云开发
- 创建云环境
- 将 `cloudfunctions` 目录下的云函数上传并部署

## 权限要求

- 相机权限：用于拍照和扫码
- 相册权限：用于选择图片
- 存储权限：用于保存分析结果

## 安全和隐私

- 数据加密存储
- 用户授权管理
- 敏感信息保护
- 合规性遵守

## 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进项目。

## 许可证

本项目采用 MIT 许可证，查看 [LICENSE](./LICENSE) 文件了解更多信息。

